<!-- templates/tasks.html -->
{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <h2>Tehtävät</h2>  <!-- Translated Tasks -->
    <form method="POST" action="{{ url_for('main.tasks') }}">
        {{ form.hidden_tag() }}
        <div class="form-group">
            {{ form.member_name.label(class="form-label") }}  <!-- Translated Member Name -->
            {{ form.member_name(class="form-control") }}
        </div>
        <div class="form-group">
            {{ form.title.label(class="form-label") }}  <!-- Translated Title -->
            {{ form.title(class="form-control") }}
        </div>
        <div class="form-group">
            {{ form.description.label(class="form-label") }}  <!-- Translated Description -->
            {{ form.description(class="form-control") }}
        </div>
        <div class="form-group">
            {{ form.due_date.label(class="form-label") }}  <!-- Translated Due Date -->
            {{ form.due_date(class="form-control", type="date") }}
        </div>
        <div class="form-group">
            {{ form.category.label(class="form-label") }}  <!-- Translated Category -->
            {{ form.category(class="form-control") }}
        </div>
        <div class="form-group">
            {{ form.status.label(class="form-label") }}  <!-- Translated Status -->
            {{ form.status(class="form-control") }}
        </div>
        <div class="form-group">
            {{ form.submit(class="btn btn-primary") }}  <!-- Translated Submit -->
        </div>
    </form>
    <hr>
    <h3>Tehtävälista</h3>  <!-- Translated Task List -->
    <ul class="list-group">
        {% for task in tasks %}
        <li class="list-group-item">
            <h5>{{ task.title }}</h5>
            <p>Jäsenen nimi: {{ task.member_name }}</p>  <!-- Translated Member Name -->
            <p>{{ task.description }}</p>
            <p>Eräpäivä: {{ task.due_date }}</p>  <!-- Translated Due Date -->
            <p>Tila: {{ task.status }}</p>  <!-- Translated Status -->
            <form method="POST" action="{{ url_for('main.update_task_status', task_id=task.task_id) }}">
                <input type="hidden" name="status" value="{{ 'completed' if task.status == 'pending' else 'pending' }}">
                <button type="submit" class="btn btn-secondary">{{ 'Merkitse suoritetuksi' if task.status == 'pending' else 'Merkitse odottavaksi' }}</button>  <!-- Translated Button -->
            </form>
            <a href="{{ url_for('main.edit_task', task_id=task.task_id) }}" class="btn btn-warning">Muokkaa</a>  <!-- Translated Edit -->
            <form method="POST" action="{{ url_for('main.delete_task', task_id=task.task_id) }}" style="display:inline;">
                <button type="submit" class="btn btn-danger">Poista</button>  <!-- Translated Delete -->
            </form>
        </li>
        {% endfor %}
    </ul>
</div>
{% endblock %}